<!DOCTYPE html>
<html lang="en">
<head>
	<title>Login</title>

<link rel="stylesheet" type="text/css" href="css/util.css">
<link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<script>

function myfunction(){
	//alert("dd")
	localStorage.removeItem("user");
}

async function submitHandler(event) {
	

    event.preventDefault();
    let form = event.target;
    let user = {}; 
    user.username= form.username.value;
   
    user.password= form.pass.value;
    
    var u = user.username;
    var p = user.password;
    
    var url='users/list/'+u+'/'+p;
    
    
    fetch(url).then(function(response){
        response.json().then(function(data) {
        	var res=data;
        	if(res==1){
        		
        	localStorage.setItem("user",user.username);
        	
 		   var url="index.html";
 		    window.location.href=url;
 		    return false;
        	}
        	else{
        		alert("Invalid Username or Password");
        		window.location.href="signup.html";
        	    return false;
        	   
        	}
        	
        });
    }).catch(function(error) {
        console.log('Fetch Error:', error);
    });
	
 
 
  
	
}





</script>

<body  onload="myfunction()">  

<form id="addForm" class="login100-form validate-form" name="addForm" method="post"> 
<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100"> 
					<span class="login100-form-title p-b-26">
						Welcome<br><br>
						<h5>Enter your details to login</h5>
					   </span>
					
		<!--username -->		   
		<div class="wrap-input100 validate-input" data-validate = "Enter Username">
		Username:
						<input required id="username" class="input100" type="text" name="username">
						<span class="focus-input100"></span>
		</div>
		
		<!-- password -->
		<div class="wrap-input100 validate-input" data-validate="Enter password">
		Password
						<span class="btn-show-pass">
							<i class="zmdi zmdi-eye"></i>
						</span>
						<input required id="password" class="input100" type="password" name="pass">
						<span class="focus-input100"></span>
					</div>
					
					
		<!-- Submit -->
			<div class="container-login100-form-btn">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button type="submit" value="submit" class="login100-form-btn">
							Login
							</button>
						</div>
					</div>
	   <!-- ------------- -->
	   
	   	<div class="text-center"><br><br>
					
		<a class="login100-form-title p-b-26" href="signup.html">
		New User? Signup
		</a>
		</div>
		
		 <!-- ------------- -->
		
		
	   </div>
	   </div>
	   </div>
					
 

<!--<input type="submit" value="register">      -->
</form> 


	
<script>

	 document.getElementById("addForm").addEventListener("submit", submitHandler);

</script>


</body>
</html>