<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Buy Operations</title>
    <link rel="stylesheet" href="stylesheets/history.css" />

    <script>
    
    function getBuy() {
       // done using promise using then function syntax
        fetch('stocks/sellquantity/Ahilan004').then(function(result) {
            return result.json();
        }).then(function (tradeList) {
        	 
        	

            let htmlString="<h1>Sell trades</h1>";
            tradeList.map((trade) => {
            	
            	htmlString+="<div id=\"pricing-table\">";
                htmlString+= "<div class=\"plan\">";
                
                htmlString+="<h3>" + trade.ticker + "<span>" + trade.price +"$"+"</span></h3>";
                
                var str1 = "FILLED";
                var str2 = trade.state;
                var n = str1.localeCompare(str2);
                if(n==0)
                	{
                	var url="sellstocks.html?ticker="+trade.ticker;
                	   htmlString+="<a class=\"signup\" href=\""+url+"\">Sell</a>";

                	}
                else
                   {
                 htmlString+="<a class=\"signup\" href='#' onClick=\"alert('Cannot sell this trade');\">Sell</a>";
                   }
                
                
                var d = new Date(trade.date);

                var date = d.getDate();
                var month = d.getMonth(); 
                var year = d.getFullYear();

                var dateString = date + "-" +(month + 1) + "-" + year;
                
               //htmlString+="<ul><li>" + dateString + "</li>";
                htmlString+="<ul><li><b>Quantity:</b>" + trade.quantity+ "</li></ul></div></div>";
                //htmlString+="<li><b>State:</b>" + trade.state+ "</li></ul></div></div>";
                
                
            });
        
            document.getElementById("tradeDiv").innerHTML = htmlString;
        });
    }
   
           
    </script>
</head>


<body onLoad="getBuy()">
   
       
        
 
  <div id="tradeDiv"></div>
       
   
</body>
</html>